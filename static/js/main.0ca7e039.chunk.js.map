{"version":3,"sources":["utils/storage.js","client.js","utils/auth.js","contexts/AuthContextProvider.js","utils/publicUrl.js","components/PlaylistItem.js","components/Playlists.js","components/Home.js","components/TopSongsItem.js","components/TopSongsChart.js","contexts/TimeframeContextProvider.js","utils/fetch.js","utils/date.js","components/TopSongs.js","components/NotAuthenticated.js","contexts/PageContextProvider.js","components/PagePicker.js","components/Navbar.js","components/App.js","serviceWorker.js","index.js"],"names":["storeItem","key","value","window","localStorage","setItem","JSON","stringify","initialState","defaultVal","parse","getItem","scopes","loginRedirectUrl","authQueryString","URLSearchParams","append","client","join","toString","timeout","ms","Promise","resolve","setTimeout","AuthContext","createContext","AuthContextProvider","props","useState","accessToken","setAccessToken","exprDate","setExprDate","userGrantedAccess","setUserGrantedAccess","userIsAuthenticated","currentDate","Date","expirationDate","handleAuthRedirect","location","search","substr","get","hash","token","date","numSecondsUntilExpr","exprDateBuffer","setTime","getTime","auth","parseInt","history","replaceState","a","spotifyLogoutWindow","open","close","href","useLayoutEffect","context","authenticateUser","logoutUser","Provider","children","assetPath","process","PlaylistItem","className","src","playlist","images","length","url","publicUrl","alt","onClick","e","playlistName","name","console","log","Playlists","playlists","map","idx","Home","userPlaylists","setUserPlaylists","useContext","useEffect","params","limit","endpoint","fetch","headers","res","json","data","items","fetchUserPlaylist","TopSongsItem","artistNames","song","artists","artist","rank","popularity","TopSongsChart","songs","isAscending","topSongsItems","id","TimeframeContext","TimeframeContextProvider","timeframe","setTimeframe","timeframeReadable","setTimeframeReadable","post","body","method","getCurrentDateString","dateString","beginning","indexOf","substring","stripDayOfWeek","toLocaleDateString","undefined","weekday","year","month","day","TopSongs","topSongs","setTopSongs","setIsAscending","createPlaylistSuccess","setCreatePlaylistSuccess","playlistId","setPlaylistId","getTopSongsTitle","handleCreatePlaylist","spotify","userData","order","range","description","createPlaylistData","uri","snapshot_id","handleReorder","reverse","time_range","topSongsData","fetchTopSongs","NotAuthenticated","PageContext","PageContextProvider","page","setPage","PagePicker","Navbar","styleNavButtons","button","forEach","document","getElementById","style","color","spotifyGreen","getComputedStyle","getPropertyValue","handleTopSongsNavigation","target","App","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.0ca7e039.chunk.js","sourcesContent":["export function getItem(key) {\n  return JSON.parse(window.localStorage.getItem(key));\n}\n\nexport function storeItem(key, value) {\n  window.localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function initialState(key, defaultVal) {\n  if (!defaultVal) defaultVal = '';\n  try { return getItem(key); }\n  catch { return defaultVal; }\n}\n","export default {\n  client_id: \"ede2e752aac9420c8255c01272a9d8ca\",\n  client_secret: \"ed16805939204892bc95f31eb9c9c5b9\",\n  redirect_uri: \"https://bcwebcourse.github.io/creative-project-spotify-manager\"\n}","import client from '../client.js';\n\nconst authEndpoint = \"https://accounts.spotify.com/authorize\";\nconst scopes = ['playlist-modify-public', 'user-read-email', 'user-top-read'];\n\nexport function loginRedirectUrl() {\n  const authQueryString = new URLSearchParams();\n  authQueryString.append('client_id', client.client_id);\n  authQueryString.append('response_type', 'token');\n  authQueryString.append('redirect_uri', client.redirect_uri);\n  authQueryString.append('scope', scopes.join(' '));\n  return `${authEndpoint}?${authQueryString.toString()}`;\n}\n\nexport function createExprDate(numSecondsUntilExpr) {\n  const date = new Date();\n  const exprDateBuffer = numSecondsUntilExpr * 1000;\n  date.setTime(date.getTime() + exprDateBuffer);\n  return date;\n}\n\nexport function timeout(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport function stripHashFragmentFromUrl() {\n  window.history.replaceState(null, null, ' ');\n}\n","import React, { createContext, useState, useLayoutEffect } from 'react';\nimport { initialState, storeItem } from '../utils/storage';\nimport * as auth from '../utils/auth';\n\nexport const AuthContext = createContext();\n\nfunction AuthContextProvider(props) {\n  const [accessToken, setAccessToken] = useState(initialState('accessToken'));\n  const [exprDate, setExprDate] = useState(initialState('exprDate'));\n  const [userGrantedAccess, setUserGrantedAccess] = useState(initialState('userGrantedAccess', true));\n\n  function userIsAuthenticated() {\n    const currentDate = new Date();\n    const expirationDate = new Date(exprDate);\n    return accessToken && userGrantedAccess && (currentDate < expirationDate);\n  }\n\n  function handleAuthRedirect() {\n    const search = new URLSearchParams(window.location.search.substr(1));\n    if (search.get('error')) {\n      setUserGrantedAccess(false);\n      storeItem('userGrantedAccess', false);\n      return\n    }\n    const hash = new URLSearchParams(window.location.hash.substr(1));\n    const token = hash.get('access_token');\n    if (token) {\n      const numSecondsUntilExpr = parseInt(hash.get('expires_in'));\n      const date = auth.createExprDate(numSecondsUntilExpr);\n      setAccessToken(token);\n      setExprDate(date);\n      setUserGrantedAccess(true);\n      storeItem('accessToken', token);\n      storeItem('exprDate', date.toString());\n      storeItem('userGrantedAccess', true);\n      auth.stripHashFragmentFromUrl();\n    }  \n  }\n\n  function authenticateUser() {\n    if (userIsAuthenticated()) return;\n    handleAuthRedirect();\n    window.location.href = auth.loginRedirectUrl();\n  }\n\n  async function logoutUser() {\n    storeItem('accessToken', '');\n    storeItem('exprDate', '');\n    storeItem('userGrantedAccess', false);\n    const logoutUrl = 'https://accounts.spotify.com/en/logout';\n    const windowOptions = 'width=100,height=100,top=0,left=0,toolbar=1,location=1,' +\n                         'directories=1,status=1,menubar=1,scrollbars=1';\n    const spotifyLogoutWindow = window.open(logoutUrl, 'Spotify Logout', windowOptions);\n    await auth.timeout(1300);\n    spotifyLogoutWindow.close()\n    window.location.href = auth.loginRedirectUrl();\n  }\n\n  useLayoutEffect(handleAuthRedirect, []);\n\n  const context = {\n    accessToken,\n    userGrantedAccess,\n    userIsAuthenticated,\n    handleAuthRedirect,\n    authenticateUser,\n    logoutUser\n  };\n\n  return (\n    <AuthContext.Provider value={context}>\n      {props.children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContextProvider;\n","export default (assetPath) => {\n  return process.env.PUBLIC_URL + assetPath;\n}","import React from 'react';\nimport '../styles/PlaylistItem.css';\nimport publicUrl from '../utils/publicUrl';\n\nfunction PlaylistItem(props) {\n\n  function handlePlayListChange(e, playlistName) {\n      // props.setPage(playlistName);\n      console.log(playlistName);\n  }\n\n  function playlistImage() {\n    if (props.playlist.images.length)\n      return props.playlist.images[0].url;\n    else\n      return publicUrl('/empty-playlist.png');\n  }\n\n  return (\n    <div className=\"playlist-obj\">\n        <img\n          className=\"playlist-thumbnail\"\n          src={playlistImage()}\n          alt=\"playlist\"\n          onClick={e => handlePlayListChange(e, props.playlist.name)}\n        />\n        <p>\n          {props.playlist.name}\n        </p>\n    </div>\n  );\n}\n\nexport default PlaylistItem;\n","import React from 'react';\nimport '../styles/Home.css';\nimport PlaylistItem from './PlaylistItem';\n\nfunction Playlists({ playlists }) {\n  return (\n    <div className=\"playlists\">\n      {playlists.map((playlist, idx) =>\n        <PlaylistItem key={idx} playlist={playlist}/>\n      )}\n    </div>\n  );\n}\n\nexport default Playlists;\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContextProvider';\r\nimport '../styles/Home.css';\r\nimport Playlists from './Playlists';\r\n\r\nfunction Home() {\r\n  const [userPlaylists, setUserPlaylists] = useState([]);\r\n  const { accessToken, authenticateUser } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    authenticateUser();\r\n    async function fetchUserPlaylist() {\r\n      const params = new URLSearchParams({ limit: 50 });\r\n      const endpoint = `https://api.spotify.com/v1/me/playlists?${params}`;\r\n      const res = await fetch(endpoint, {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${accessToken}`\r\n        }\r\n      });\r\n      const data = await res.json();\r\n      setUserPlaylists(data.items);\r\n    }\r\n    fetchUserPlaylist();\r\n  }, [accessToken, authenticateUser]);\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <header className=\"home-header\">\r\n        <h1>Welcome to Spotify Manager.</h1>\r\n        <p>\r\n          We believe that people deserve to have more control over their music listening experience. \r\n          That's why we created Spotify Manager. Use the navigation bar to checkout your top 50 songs \r\n          across various timespans, and if you like what you see, click \"create playlist\" to generate \r\n          a new playlist of those songs. Then come back here to see that playlist appear below, \r\n          or open up Spotify to start listening right away.\r\n        </p>\r\n      </header>\r\n      <section className=\"home-body\">\r\n        {userPlaylists.length ? (\r\n        <div>\r\n          <h2 className=\"home-body-header\">Your Playlists</h2>\r\n          <Playlists playlists={userPlaylists} />\r\n        </div>\r\n        ) : \r\n        <h2 className=\"loading-indicator\">Loading...</h2>}\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\nimport '../styles/TopSongsItem.css';\n\nfunction TopSongsItem(props) {\n  const artistNames = props.song.artists.map(artist => artist.name).join(', ');\n\n  return (\n    <div className=\"song-row\">\n      <div className=\"song-ranking\">{props.rank}.</div>\n      <div>{props.song.name}</div>\n      <div className=\"song-artist\">{artistNames}</div>\n      <div className=\"song-popularity\">{props.song.popularity} / 100</div>\n    </div>\n  );\n}\n\nexport default TopSongsItem;","import React from 'react';\nimport TopSongsItem from './TopSongsItem';\nimport '../styles/TopSongsChart.css';\n\nfunction TopSongsChart({ songs, isAscending }) {\n  let topSongsItems = songs.map((song, idx) => {\n    const rank = isAscending ? idx + 1 : 50 - idx;\n    return <TopSongsItem key={idx} rank={rank} song={song}/>\n  });\n\n  return (\n    <div className=\"top-songs-chart\">\n      <header className=\"top-songs-chart-header\">\n        <div className=\"song-ranking-placeholder\"></div>\n        <div>Title</div>\n        <div className=\"song-artist\">Artist</div>\n        <div id=\"song-popularity\" className=\"song-popularity\">Popularity</div>\n      </header>\n      {topSongsItems}\n    </div>\n  );\n}\n\nexport default TopSongsChart;\n","import React, { createContext, useState } from 'react';\n\nexport const TimeframeContext = createContext();\n\nfunction TimeframeContextProvider(props) {\n  const [timeframe, setTimeframe] = useState('Home');\n  const [timeframeReadable, setTimeframeReadable] = useState('Month');\n  \n  const context = {\n    timeframe, setTimeframe,\n    timeframeReadable, setTimeframeReadable\n  };\n\n  return (\n    <TimeframeContext.Provider value={context}>\n      {props.children}\n    </TimeframeContext.Provider>\n  );\n}\n\nexport default TimeframeContextProvider;","export async function get({ endpoint, accessToken }) {\n  const res = await fetch(endpoint, {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${accessToken}`\n    }\n  });\n  return await res.json();\n}\n\nexport async function post({ endpoint, accessToken, body }) {\n  const res = await fetch(endpoint, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${accessToken}`\n    },\n    body: JSON.stringify(body)\n  });\n  return await res.json();\n}\n","export function getCurrentDateString() {\n  const date = new Date();\n  const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n  const currentDate = date.toLocaleDateString(undefined, dateOptions);\n  return stripDayOfWeek(currentDate);\n}\n\nfunction stripDayOfWeek(dateString) {\n  const beginning = dateString.indexOf(' ') + 1;\n  return dateString.substring(beginning);\n}\n","import React, { useState, useEffect, useContext } from 'react';\nimport TopSongsChart from './TopSongsChart';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { TimeframeContext } from '../contexts/TimeframeContextProvider';\nimport * as spotify from '../utils/fetch';\nimport { getCurrentDateString } from '../utils/date';\nimport '../styles/TopSongs.css';\n\nfunction TopSongs() {\n  const [topSongs, setTopSongs] = useState([]);\n  const [isAscending, setIsAscending] = useState(true);\n  const [createPlaylistSuccess, setCreatePlaylistSuccess] = useState(false);\n  const [playlistId, setPlaylistId] = useState('');\n\n  const { accessToken, authenticateUser } = useContext(AuthContext);\n  const { timeframe, timeframeReadable } = useContext(TimeframeContext);\n\n  useEffect(() => {\n    async function fetchTopSongs() {\n      const params = new URLSearchParams({\n        time_range: timeframe,\n        limit: 50\n      });\n      const topSongsData = await spotify.get({\n        endpoint: `https://api.spotify.com/v1/me/top/tracks?${params}`,\n        accessToken\n      });\n      setTopSongs(topSongsData.items);\n    }\n    authenticateUser();\n    setCreatePlaylistSuccess(false);\n    setIsAscending(true);\n    fetchTopSongs();\n  }, [authenticateUser, accessToken, timeframe]);\n\n  function getTopSongsTitle() {\n    if (timeframe === 'short_term')\n      return `Top Songs of the ${timeframeReadable}`;\n    else if (timeframe === 'medium_term')\n      return `Top Songs of the Past ${timeframeReadable}`;\n    else if (timeframe === 'long_term')\n      return `Top Songs of ${timeframeReadable}`;\n  }\n\n  function handleNavigateHome() {\n    window.location.href = process.env.PUBLIC_URL;\n  }\n\n  function handleOpenSpotifyPlaylists() {\n    window.open(`https://open.spotify.com/playlist/${playlistId}`);\n  }\n\n  async function handleCreatePlaylist(e) {\n    authenticateUser();\n    const userData = await spotify.get({\n      endpoint: 'https://api.spotify.com/v1/me',\n      accessToken\n    });\n    const order = isAscending ? 'ascending' : 'descending';\n    const range = isAscending ? '1 - 50' : '50 - 1';\n    const createPlaylistData = await spotify.post({\n      endpoint: `https://api.spotify.com/v1/users/${userData.id}/playlists`,\n      accessToken,\n      body: {\n        name: getTopSongsTitle(),\n        description: 'This playlist was created for you by Spotify ' + \n                     `Manager on ${getCurrentDateString()}. Ranked in ` +\n                     `${order} order from ${range}.`\n      }\n    });\n    setPlaylistId(createPlaylistData.id);\n    const addSongsData = await spotify.post({\n      endpoint: `https://api.spotify.com/v1/playlists/${createPlaylistData.id}/tracks`,\n      accessToken,\n      body: topSongs.map(song => song.uri)\n    });\n    if (addSongsData.snapshot_id) setCreatePlaylistSuccess(true);\n  }\n\n  function handleReorder(e) {\n    setIsAscending(!isAscending);\n    setTopSongs(topSongs.reverse());\n  }\n\n  return (\n    <div className=\"top-songs\">\n      {createPlaylistSuccess &&\n        <div className=\"success-message\">\n          Success! Go \n          <button className=\"nav-link\" onClick={handleNavigateHome}>Home</button> \n          or open \n          <button className=\"nav-link\" onClick={handleOpenSpotifyPlaylists}>Spotify</button> \n          to see your new playlist.\n        </div>\n      }\n      <header className=\"top-songs-small-header\">\n        <div className=\"top-songs-small-header-buttons\">\n          <button \n           className=\"spotify-button top-songs-button small-header-order\"\n           onClick={handleReorder}\n          >\n            Order {isAscending ? 'Descending' : 'Ascending'}\n          </button>\n          <button className=\"spotify-button top-songs-button\" onClick={handleCreatePlaylist}>\n            Create Playlist\n          </button>\n        </div>\n        <h2 className=\"top-songs-title\">{getTopSongsTitle()}</h2>\n      </header>\n      <header className=\"top-songs-large-header\">\n          <button\n           value=\"Descending\"\n           className=\"spotify-button top-songs-button large-header-order\"\n           onClick={handleReorder}\n          >\n            Order {isAscending ? 'Descending' : 'Ascending'}\n          </button>\n        <h2 className=\"top-songs-title\">{getTopSongsTitle()}</h2>\n        <button className=\"spotify-button top-songs-button\" onClick={handleCreatePlaylist}>\n          Create Playlist\n        </button>\n      </header>\n      {topSongs.length ?\n      <TopSongsChart songs={topSongs} isAscending={isAscending} /> :\n      <h2 className=\"loading-indicator\">Loading...</h2>}\n    </div>\n  );\n}\n\nexport default TopSongs;\n","import React from 'react';\nimport { loginRedirectUrl } from '../utils/auth';\nimport '../styles/NotAuthenticated.css';\n\nfunction NotAuthenticated() {\n  function handleLogin() {\n    window.location.href = loginRedirectUrl();\n  }\n\n  return (\n    <div className=\"not-authenticated\">\n      <h1>Please log in to your Spotify account.</h1>\n      <p>\n        In order to use this web app, you must log in to your Spotify account and grant all the necessary permissions.\n        If it has been more than an hour since you last logged in, you may be asked to do so again.\n      </p>\n      <button className=\"spotify-button login-button\" onClick={handleLogin}>Log in</button>\n    </div>\n  );\n}\n\nexport default NotAuthenticated;\n","import React, { createContext, useState } from 'react';\n\nexport const PageContext = createContext();\n\nfunction PageContextProvider(props) {\n  const [page, setPage] = useState('Home');\n  const context = { page, setPage };\n\n  return (\n    <PageContext.Provider value={context}>\n      {props.children}\n    </PageContext.Provider>\n  );\n}\n\nexport default PageContextProvider;","import React, { useContext } from 'react';\nimport Home from './Home';\nimport TopSongs from './TopSongs';\nimport NotAuthenticated from './NotAuthenticated';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { PageContext } from '../contexts/PageContextProvider';\n\nfunction PagePicker() {\n  const { userIsAuthenticated } = useContext(AuthContext);\n  const { page } = useContext(PageContext);\n\n  if (!userIsAuthenticated())\n    return <NotAuthenticated />\n  \n  switch (page) {\n    case 'Home':\n      return <Home />;\n    case 'TopSongs':\n      return <TopSongs />;\n    default:\n      return <Home />;\n  }\n}\n\nexport default PagePicker;\n","import React, { useContext, useLayoutEffect } from 'react';\nimport { TimeframeContext } from '../contexts/TimeframeContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { PageContext } from '../contexts/PageContextProvider';\nimport publicUrl from '../utils/publicUrl';\nimport '../styles/Navbar.css';\n\nfunction Navbar() {\n  const { setTimeframe, setTimeframeReadable } = useContext(TimeframeContext);\n  const { logoutUser } = useContext(AuthContext);\n  const { setPage } = useContext(PageContext);\n\n  useLayoutEffect(() => {\n    const homeButton = document.getElementById('home-button');\n    styleNavButtons(homeButton);\n  }, []);\n\n  function styleNavButtons(button) {\n    const allNavButtonIds = ['home-button', 'short-term', 'medium-term', 'long-term'];\n    allNavButtonIds.forEach(id => {\n      if (id !== button.id) {\n        const navButton = document.getElementById(id);\n        navButton.style.color = 'white';\n      }\n    });\n    const computedStyles = getComputedStyle(document.body)\n    const spotifyGreen = computedStyles.getPropertyValue('--spotify-green');\n    button.style.color = spotifyGreen;\n  }\n\n  function handleHomeNavigation(e) {\n    styleNavButtons(e.target);\n    setPage('Home');\n  }\n\n  function handleTopSongsNavigation(e, timeframe) {\n    styleNavButtons(e.target);\n    setTimeframe(timeframe);\n    setTimeframeReadable(e.target.value);\n    setPage('TopSongs');\n  }\n\n  return (\n    <nav>\n      <header className=\"title\">\n        <img className=\"logo\" src={publicUrl('/favicon.ico')} alt=\"Logo\"/>\n        <h1 className=\"app-title\">Spotify Manager</h1>\n      </header>\n      <section className=\"nav-body\">\n        <button id=\"home-button\" className=\"top-songs-nav-item\" onClick={handleHomeNavigation}>Home</button>\n        <h2 className=\"top-songs-nav-item\">Your Top Songs:</h2>\n        <button value=\"Month\" id=\"short-term\" onClick={e => handleTopSongsNavigation(e, 'short_term')}>\n          Month\n        </button>\n        <button value=\"Six Months\" id=\"medium-term\" onClick={e => handleTopSongsNavigation(e, 'medium_term')}>\n          Six Months\n        </button>\n        <button value=\"All Time\" id=\"long-term\" onClick={e => handleTopSongsNavigation(e, 'long_term')}>\n          All Time\n        </button>\n        <button className=\"top-songs-nav-item\" onClick={logoutUser}>Logout</button>\n      </section>\n    </nav>\n  );\n}\n\nexport default Navbar;\n","import React from 'react';\nimport PagePicker from './PagePicker';\nimport Navbar from './Navbar';\nimport AuthContextProvider from '../contexts/AuthContextProvider';\nimport PageContextProvider from '../contexts/PageContextProvider';\nimport TimeframeContextProvider from '../contexts/TimeframeContextProvider';\nimport '../styles/App.css';\n\nfunction App() {\n  return (\n    <AuthContextProvider>\n      <PageContextProvider>\n        <TimeframeContextProvider>\n          <div className=\"main\">\n            <Navbar />\n            <div className=\"content\">\n              <PagePicker />\n            </div>\n          </div>\n        </TimeframeContextProvider>\n      </PageContextProvider>\n    </AuthContextProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}