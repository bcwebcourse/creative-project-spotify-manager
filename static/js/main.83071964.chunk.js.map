{"version":3,"sources":["utils/storage.js","client.js","utils/auth.js","contexts/AuthContextProvider.js","components/PlaylistItem.js","components/Home.js","components/TopSongsItem.js","contexts/TimeframeContextProvider.js","components/TopSongs.js","components/NotAuthenticated.js","components/PagePicker.js","components/Navbar.js","utils/publicUrl.js","components/App.js","serviceWorker.js","index.js"],"names":["storeItem","key","value","window","localStorage","setItem","JSON","stringify","initialState","variable","defaultVal","parse","getItem","scopes","loginRedirectUrl","authQueryString","URLSearchParams","append","client","join","toString","timeout","ms","Promise","resolve","setTimeout","AuthContext","createContext","AuthContextProvider","props","useState","accessToken","setAccessToken","exprDate","setExprDate","userGrantedAccess","setUserGrantedAccess","userIsAuthenticated","currentDate","Date","expirationDate","authenticateUser","location","search","substr","get","hash","token","date","numSecondsUntilExpr","exprDateBuffer","setTime","getTime","createExprDate","parseInt","href","process","a","spotifyLogoutWindow","open","close","useLayoutEffect","context","logoutUser","Provider","children","PlaylistItem","playlistName","playlist","name","className","src","images","url","alt","onClick","e","console","log","handlePlayListChange","Home","userPlaylists","setUserPlaylists","useContext","fetch","headers","res","json","data","items","fetchUserPlaylist","map","idx","TopSongsItem","songName","song","artistNames","artists","artist","rank","popularity","TimeframeContext","TimeframeContextProvider","timeframe","setTimeframe","timeframeReadable","setTimeframeReadable","TopSongs","topSongs","setTopSongs","createPlaylistSuccess","setCreatePlaylistSuccess","userRes","userData","dateOptions","weekday","year","month","day","timeOptions","hour","minute","toLocaleDateString","undefined","currentTime","toLocaleTimeString","createPlaylistEndpoint","id","method","body","description","createPlaylistRes","createPlaylistData","playlistId","songUris","uri","addSongsEndpoint","addSongsRes","addSongsData","snapshot_id","params","time_range","limit","endpoint","fetchTopSongs","NotAuthenticated","PagePicker","page","Navbar","assetPath","styleNavButtons","button","forEach","document","getElementById","style","color","spotifyGreen","getComputedStyle","getPropertyValue","handleTopSongsNavigation","target","innerHTML","setPage","App","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.83071964.chunk.js","sourcesContent":["export function getItem(key) {\n  return JSON.parse(window.localStorage.getItem(key));\n}\n\nexport function storeItem(key, value) {\n  window.localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function initialState(variable, defaultVal) {\n  if (!defaultVal) defaultVal = '';\n  return getItem(variable) || defaultVal;\n}\n","export default {\n  client_id: \"ede2e752aac9420c8255c01272a9d8ca\",\n  client_secret: \"ed16805939204892bc95f31eb9c9c5b9\",\n  redirect_uri: \"https://bcwebcourse.github.io/creative-project-spotify-manager\"\n}","import client from '../client.js';\n\nconst authEndpoint = \"https://accounts.spotify.com/authorize\";\nconst scopes = ['playlist-modify-public', 'user-read-email', 'user-top-read'];\n\nexport function loginRedirectUrl() {\n  const authQueryString = new URLSearchParams();\n  authQueryString.append('client_id', client.client_id);\n  authQueryString.append('response_type', 'token');\n  authQueryString.append('redirect_uri', client.redirect_uri);\n  authQueryString.append('scope', scopes.join(' '));\n  return `${authEndpoint}?${authQueryString.toString()}`;\n}\n\nexport function createExprDate(numSecondsUntilExpr) {\n  const date = new Date();\n  const exprDateBuffer = numSecondsUntilExpr * 1000;\n  date.setTime(date.getTime() + exprDateBuffer);\n  return date;\n}\n\nexport function timeout(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n","import React, { createContext, useState, useLayoutEffect } from 'react';\nimport { initialState, storeItem } from '../utils/storage';\nimport { createExprDate, loginRedirectUrl, timeout } from '../utils/auth';\n\nexport const AuthContext = createContext();\n\nfunction AuthContextProvider(props) {\n  const [accessToken, setAccessToken] = useState(initialState('accessToken'));\n  const [exprDate, setExprDate] = useState(initialState('exprDate'));\n  const [userGrantedAccess, setUserGrantedAccess] = useState(initialState('userGrantedAccess', true));\n\n  function userIsAuthenticated() {\n    const currentDate = new Date();\n    const expirationDate = new Date(exprDate);\n    return accessToken && userGrantedAccess && (currentDate < expirationDate);\n  }\n\n  function authenticateUser() {\n    if (userIsAuthenticated())\n      return;\n    const search = new URLSearchParams(window.location.search.substr(1));\n    if (search.get('error')) {\n      setUserGrantedAccess(false);\n      storeItem('userGrantedAccess', false);\n      return;\n    }\n    const hash = new URLSearchParams(window.location.hash.substr(1));\n    const token = hash.get('access_token');\n    if (token) {\n      const numSecondsUntilExpr = parseInt(hash.get('expires_in'));\n      const date = createExprDate(numSecondsUntilExpr);\n      setAccessToken(token);\n      setExprDate(date);\n      setUserGrantedAccess(true);\n      storeItem('accessToken', token);\n      storeItem('exprDate', date.toString());\n      storeItem('userGrantedAccess', true);\n      window.location.href = process.env.PUBLIC_URL;\n      return;\n    }    \n    window.location.href = loginRedirectUrl();\n  }\n\n  async function logoutUser() {\n    storeItem('accessToken', '');\n    storeItem('exprDate', '');\n    storeItem('userGrantedAccess', false);\n    const logoutUrl = 'https://accounts.spotify.com/en/logout';\n    const windowOptions = 'width=100,height=100,top=0,left=0,toolbar=1,location=1,' +\n                         'directories=1,status=1,menubar=1,scrollbars=1';\n    const spotifyLogoutWindow = window.open(logoutUrl, 'Spotify Logout', windowOptions);\n    await timeout(1300);\n    spotifyLogoutWindow.close()\n    window.location.href = loginRedirectUrl();\n  }\n\n  useLayoutEffect(authenticateUser, [accessToken, exprDate, userGrantedAccess]);\n\n  const context = {\n    accessToken,\n    userGrantedAccess,\n    userIsAuthenticated,\n    authenticateUser,\n    logoutUser\n  }\n\n  return (\n    <AuthContext.Provider value={context}>\n      {props.children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContextProvider;\n","import React from 'react';\nimport '../styles/PlaylistItem.css';\n\nfunction PlaylistItem(props) {\n  let playlistName = props.playlist.name.substr(0, 25);\n  if (playlistName < props.playlist.name)\n    playlistName += '...';\n  function handlePlayListChange(e, playlistName) {\n      // props.setPage(playlistName);\n      console.log(playlistName);\n  } \n\n  return (\n    <div className=\"playlist-obj\">\n        <img\n          className=\"playlist-thumbnail\"\n          src={props.playlist.images[0].url}\n          alt=\"playlist\"\n          onClick={e => handlePlayListChange(e, props.playlist.name)}\n        />\n        <p>\n          {playlistName}\n        </p>\n    </div>\n  );\n}\n\nexport default PlaylistItem;","import React, { useState, useLayoutEffect, useContext } from 'react';\r\nimport { AuthContext } from '../contexts/AuthContextProvider';\r\nimport '../styles/Home.css';\r\nimport PlaylistItem from './PlaylistItem';\r\n\r\nfunction Home() {\r\n  const [userPlaylists, setUserPlaylists] = useState([]);\r\n  const { accessToken, authenticateUser } = useContext(AuthContext);\r\n\r\n  useLayoutEffect(() => {\r\n    authenticateUser();\r\n    async function fetchUserPlaylist() {\r\n      const endpoint = 'https://api.spotify.com/v1/me/playlists?';\r\n      const res = await fetch(endpoint, {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${accessToken}`\r\n        }\r\n      });\r\n      const data = await res.json();\r\n      setUserPlaylists(data.items);\r\n    }\r\n    fetchUserPlaylist();\r\n  }, [authenticateUser, accessToken]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"home-header\">\r\n        <h1>Welcome to Spotify Manager.</h1>\r\n        <p>\r\n          To see your top songs, use the navigation bar on the left. If you like what you see, \r\n          click \"create playlist\" to generate a new playlist of those songs. Come back here \r\n          to see your new playlist appear below, or open up Spotify to start listening right away.\r\n        </p>\r\n      </div>\r\n      <h2 className=\"home-section-header\">Your Playlists</h2>\r\n      <div className=\"playlists\">\r\n        {userPlaylists.map((playlist, idx) =>\r\n          <PlaylistItem key={idx} playlist={playlist}/>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\nimport '../styles/TopSongsItem.css';\n\nfunction TopSongsItem(props) {\n  let songName = props.song.name.substr(0, 40);\n  if (songName < props.song.name)\n    songName += '...';\n  const artistNames = props.song.artists.map(artist => artist.name).join(', ');\n\n  return (\n    <div className=\"song-row\">\n      <div className=\"song-ranking\">{props.rank}.</div>\n      <div>{songName}</div>\n      <div>{artistNames}</div>\n      <div className=\"song-popularity\">{props.song.popularity}</div>\n    </div>\n  );\n}\n\nexport default TopSongsItem;","import React, { createContext, useState } from 'react';\n\nexport const TimeframeContext = createContext();\n\nfunction TimeframeContextProvider(props) {\n  const [timeframe, setTimeframe] = useState('Home');\n  const [timeframeReadable, setTimeframeReadable] = useState('Month');\n  \n  const context = {\n    timeframe, setTimeframe,\n    timeframeReadable, setTimeframeReadable\n  }\n\n  return (\n    <TimeframeContext.Provider value={context}>\n      {props.children}\n    </TimeframeContext.Provider>\n  );\n}\n\nexport default TimeframeContextProvider;","import React, { useState, useLayoutEffect, useContext } from 'react';\nimport TopSongsItem from './TopSongsItem';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport { TimeframeContext } from '../contexts/TimeframeContextProvider';\nimport '../styles/TopSongs.css';\n\nfunction TopSongs() {\n  const [topSongs, setTopSongs] = useState([]);\n  const [createPlaylistSuccess, setCreatePlaylistSuccess] = useState(false);\n\n  const { accessToken, authenticateUser } = useContext(AuthContext);\n  const { timeframe, timeframeReadable } = useContext(TimeframeContext);\n\n  useLayoutEffect(() => {\n    authenticateUser();\n    async function fetchTopSongs() {\n      const params = new URLSearchParams({\n        time_range: timeframe,\n        limit: 50\n      });\n      const endpoint = 'https://api.spotify.com/v1/me/top/tracks?' + params;\n      const res = await fetch(endpoint, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${accessToken}`\n        }\n      });\n      const data = await res.json();\n      setTopSongs(data.items);\n    }\n    fetchTopSongs();\n  }, [authenticateUser, accessToken, timeframe]);\n\n  async function handleCreatePlaylist(e) {\n    const userRes = await fetch('https://api.spotify.com/v1/me', {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${accessToken}`\n      }\n    });\n    const userData = await userRes.json();\n    const date = new Date();\n    const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n    const timeOptions = { hour: '2-digit', minute: '2-digit' };\n    const currentDate = date.toLocaleDateString(undefined, dateOptions);\n    const currentTime = date.toLocaleTimeString([], timeOptions);\n    const createPlaylistEndpoint = `https://api.spotify.com/v1/users/${userData.id}/playlists`;\n    const createPlaylistRes = await fetch(createPlaylistEndpoint, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${accessToken}`\n      },\n      body: JSON.stringify({\n        name: `Top Songs of the Past ${timeframeReadable}`,\n        description: `This playlist was created for you by Spotify Manager on ${currentDate} at ${currentTime}.`\n      })\n    });\n    const createPlaylistData = await createPlaylistRes.json();\n    const playlistId = createPlaylistData.id;\n    const songUris = topSongs.map(song => song.uri);\n    const addSongsEndpoint = `https://api.spotify.com/v1/playlists/${playlistId}/tracks`;\n    const addSongsRes = await fetch(addSongsEndpoint, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${accessToken}`\n      },\n      body: JSON.stringify(songUris)\n    });\n    const addSongsData = await addSongsRes.json();\n    console.log(addSongsData);\n    if (addSongsData.snapshot_id) setCreatePlaylistSuccess(true);\n  }\n\n  return (\n    <div className=\"top-songs\">\n      {createPlaylistSuccess &&\n        <div className=\"success-message\">\n          Success! Go to the Home page or open Spotify to see your new playlist.\n        </div>\n      }\n      <header className=\"top-songs-header\">\n        <button className=\"top-songs-button\">\n          Filter Button\n        </button>\n        <h2 className=\"top-songs-title\">Top Songs of the Past {timeframeReadable}</h2>\n        <button className=\"top-songs-button\" onClick={handleCreatePlaylist}>\n          Create Playlist\n        </button>\n      </header>\n      <header className=\"top-songs-charts-header\">\n        <div className=\"song-ranking-placeholder\"></div>\n        <div>Title</div>\n        <div className=\"song-artist\">Artist</div>\n        <div className=\"song-popularity\">Popularity / 100</div>\n      </header>\n      {topSongs.map((song, idx) =>\n        <TopSongsItem key={idx} rank={idx + 1} song={song}/>\n      )}\n    </div>\n  );\n}\n\nexport default TopSongs;","import React from 'react';\nimport { loginRedirectUrl } from '../utils/auth';\nimport '../styles/NotAuthenticated.css';\n\nfunction NotAuthenticated(props) {\n\n  function handleLoginRequest(e) {\n    window.location.href = loginRedirectUrl();\n  }\n\n  return (\n    <div>\n      <h1>Please log in to your Spotify account.</h1>\n      <p>\n        In order to use this web app, you must log in to your Spotify account and grant all the necessary permissions.\n        If it has been more than an hour since you last logged in, you may be asked to do so again.\n      </p>\n      <button onClick={handleLoginRequest}>Log in</button>\n    </div>\n  );\n}\n\nexport default NotAuthenticated;\n","import React, { useContext } from 'react';\nimport Home from './Home';\nimport TopSongs from './TopSongs';\nimport NotAuthenticated from './NotAuthenticated';\nimport { AuthContext } from '../contexts/AuthContextProvider';\n\nfunction PagePicker(props) {\n  const { userGrantedAccess } = useContext(AuthContext);\n\n  if (!userGrantedAccess)\n    return <NotAuthenticated />\n  \n  switch (props.page) {\n    case 'Home':\n      return <Home />;\n    case 'TopSongs':\n      return <TopSongs />;\n    default:\n      return <Home />;\n  }\n}\n\nexport default PagePicker;\n","import React, { useContext, useLayoutEffect } from 'react';\nimport { TimeframeContext } from '../contexts/TimeframeContextProvider';\nimport { AuthContext } from '../contexts/AuthContextProvider';\nimport publicUrl from '../utils/publicUrl';\nimport '../styles/Navbar.css';\n\nfunction Navbar(props) {\n  const { setTimeframe, setTimeframeReadable } = useContext(TimeframeContext);\n  const { logoutUser } = useContext(AuthContext);\n\n  useLayoutEffect(() => {\n    const homeButton = document.getElementById('home-button');\n    styleNavButtons(homeButton);\n  }, []);\n\n  function styleNavButtons(button) {\n    const allNavButtonIds = ['home-button', 'short-term', 'medium-term', 'long-term'];\n    allNavButtonIds.forEach(id => {\n      if (id !== button.id) {\n        const navButton = document.getElementById(id);\n        navButton.style.color = 'white';\n      }\n    });\n    const computedStyles = getComputedStyle(document.body)\n    const spotifyGreen = computedStyles.getPropertyValue('--spotify-green');\n    button.style.color = spotifyGreen;\n  }\n\n  function handleHomeNavigation(e) {\n    styleNavButtons(e.target);\n    props.setPage('Home');\n  }\n\n  function handleTopSongsNavigation(e, timeframe) {\n    styleNavButtons(e.target);\n    setTimeframe(timeframe);\n    setTimeframeReadable(e.target.innerHTML);\n    props.setPage('TopSongs');\n  }\n\n  return (\n    <nav>\n      <div className=\"title\">\n        <img className=\"logo\" src={publicUrl('/favicon.ico')} alt=\"Logo\"/>\n        <h1 className=\"app-title\">Spotify Manager</h1>\n      </div>\n      <button id=\"home-button\" className=\"top-songs-nav-item\" onClick={handleHomeNavigation}>Home</button>\n      <h2 className=\"top-songs-nav-item\">Top Songs of the Past:</h2>\n      <button id=\"short-term\" onClick={e => handleTopSongsNavigation(e, 'short_term')}>\n        Month\n      </button>\n      <button id=\"medium-term\" onClick={e => handleTopSongsNavigation(e, 'medium_term')}>\n        Six Months\n      </button>\n      <button id=\"long-term\" onClick={e => handleTopSongsNavigation(e, 'long_term')}>\n        Few Years\n      </button>\n      <button className=\"top-songs-nav-item\" onClick={logoutUser}>Logout</button>\n    </nav>\n  );\n}\n\nexport default Navbar;\n","export default (assetPath) => {\n  return process.env.PUBLIC_URL + assetPath;\n}","import React, { useState }from 'react';\nimport PagePicker from './PagePicker';\nimport Navbar from './Navbar';\nimport AuthContextProvider from '../contexts/AuthContextProvider';\nimport TimeframeContextProvider from '../contexts/TimeframeContextProvider';\nimport '../styles/App.css';\n// import {\n//   BrowserRouter as Router,\n//   Switch,\n//   Route\n// } from \"react-router-dom\";\n\n\nfunction App() {\n  const [page, setPage] = useState('Home');\n\n  return (\n    <AuthContextProvider>\n        <TimeframeContextProvider>\n          <div className=\"main\">\n            <Navbar setPage={setPage} />\n            <div className=\"content\">\n              <PagePicker page={page} />\n            </div>\n          </div>\n        </TimeframeContextProvider>\n    </AuthContextProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}